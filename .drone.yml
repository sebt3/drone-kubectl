kind: pipeline
name: default
steps:
#- name: docker
  #image: plugins/docker
  #settings:
    #registry: 192.168.10.200:5000
    #repo: "192.168.10.200:5000/${DRONE_REPO_NAME}"
    #tags: latest
    #insecure: true

- kubectl:
    image: sebt3/drone-kubectl
    secrets: [ kubernetes_server, kubernetes_cert, kubernetes_token ]
    kubectl: "get pods"

---
kind: secret
name: kubernetes_server
get:
  path: drone-kubernetes
  name: server
---
kind: secret
name: kubernetes_cert
get:
  path: drone-kubernetes
  name: cert
---
kind: secret
name: kubernetes_token
get:
  path: drone-kubernetes
  name: token
